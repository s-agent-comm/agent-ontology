# How to Contribute

We welcome your contributions to this project! Whether it's fixing a bug, extending the ontology, or improving documentation, every effort you make is invaluable.

This document will guide you through the complete contribution process to ensure your contributions can be smoothly integrated.

## Table of Contents

- [Development Environment Setup](#development-environment-setup)
- [Contribution Workflow](#contribution-workflow)
- [Code Style](#code-style)
- [Commit Message Guidelines](#commit-message-guidelines)

## Development Environment Setup

This project uses [Nix](https://nixos.org/) to manage the development environment, ensuring a consistent and reproducible environment for all contributors.

1.  **Install Nix**: If Nix is not already installed on your system, please refer to the [official installation guide](https://nixos.org/download.html).
2.  **Enable Flakes**: Nix Flakes are a next-generation feature; please ensure you have them enabled.
3.  **Install direnv**: We use [direnv](https://direnv.net/) to automatically load the environment when you enter the project directory.
    ```bash
    # When entering the project directory for the first time, authorize direnv
    direnv allow
    ```
    Once you enter the directory, all necessary tools (e.g., Python, SHACL validation tools, etc.) will be automatically ready.

## Contribution Workflow

We adopt an "Ontology as a Single Source of Truth" development model. All manual modifications should only target the ontologies (`.ttl`) or their validation rules (`.shacl.ttl`). Other artifacts (such as JSON-LD contexts) should be automatically generated by tools.

Here is the complete contribution process:

### Step 1: Modify or Extend the Ontology

Everything starts in the `ontologies/` directory. Depending on your needs, modify existing Turtle (`.ttl`) files or create new ones to define new concepts.

> **Important**: This is the only place in the entire workflow where you should manually edit core definitions.

### Step 2: Automatically Generate JSON-LD Contexts

After modifying the ontology, you need to run the following script to update the corresponding JSON-LD files in the `context/` and `profiles/` directories.

```bash
python tools/generate_jsonld.py
```

This step ensures that our JSON-LD files are always 100% synchronized with the ontology definitions.

### Step 3: Update Validation Rules (If Needed)

If you have added new structures or constraints, go to the `tests/` directory and update or add corresponding SHACL (`.shacl.ttl`) files. This ensures that all data conforming to our ontology maintains high quality.

### Step 4: Perform Local Validation

Before submitting your changes, it is crucial to perform a full validation locally to ensure your modifications haven't broken any existing structures.

```bash
./tools/validate.sh
```

Please fix all reported errors until this command executes successfully.

### Step 5: Submit a Pull Request

Once you have completed all the above steps, you can submit your changes.

1.  Fork this repository.
2.  Create a new branch (`git checkout -b feature/your-amazing-feature`).
3.  Commit your changes (`git commit -m 'feat: Add new concept for AI agents'`).
4.  Push your branch to GitHub (`git push origin feature/your-amazing-feature`).
5.  Create a Pull Request.

After you submit a Pull Request, the system will automatically run the same CI checks as `validate.sh` to re-confirm the quality of the changes.

## Code Style

-   **Turtle (`.ttl`)**: Please follow the formatting of existing files, using consistent indentation and prefix definitions.
-   **JSON-LD (`.jsonld`)**: These files are automatically generated; please do not modify them manually.

## Commit Message Guidelines

We follow the [Conventional Commits](https://www.conventionalcommits.org/) specification for writing commit messages. This helps us to automatically generate changelogs and maintain a clear history.

Common types include:
-   `feat`: A new feature or ontology concept.
-   `fix`: A bug fix.
-   `docs`: Documentation only changes.
-   `refactor`: A code change that neither fixes a bug nor adds a feature.
-   `test`: Adding missing tests or correcting existing tests.

---

Thank you for your contributions!
